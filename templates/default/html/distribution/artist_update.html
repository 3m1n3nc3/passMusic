<script> 
	Dropzone.autoDiscover = false;

	$(function() {
	    //Dropzone class 
	    var myDropzone = new Dropzone(".dropzone", {
			url: "{$profile_photo_url}",
			paramName: "upload_image", 
			maxFilesize: 3,
			maxFiles: 1,
			acceptedFiles: "image/*",
			autoProcessQueue: false, 
		    success: (file, response) => {
		    	var data = JSON.parse(file.xhr.response);
		        console.log(file.xhr.response);
		        if (data.status_code === 0) {
		        	myDropzone.removeFile(file);
		        }
		        $('#notification').html(data.msg); 
		    }
		});
		$('#_upload_button').click(function(){           
			myDropzone.processQueue();
		}); 
	});
</script>
<main id="main">
	<section id="distribution" class="bg-light">
		<div class="container">
			<h2 class="text-secondary">Update profile info for <a href="{$profile_link}">{$this_user}</a></h2>
			
			<div id="notification"></div> 
			{$notification}
			<div class="row about-container">
				<div class="col-lg-4 content">
					<div class="container bg-white rounded shadow-sm p-3 mb-3" style="background-color: red;">

				 		<label class="container text-center text-danger bg-light font-weight-bold border border-rounded p-5 artist__photo_updateBlock dropzone" style="background-image: url('{$photo}');">
				 			<i class="fa fa-arrow-up fa-lg"></i> 
				 			<span class="h3">Select file to upload</span>
				 			<br>
				 		</label>
						<button type="button" class="btn btn-success" id="_upload_button"> 
							<i class="fa fa-cloud-upload"></i> Upload 
						</button>
			 		</div>
				</div>
				<div class="col-lg-8 content">
					<div class="container bg-white rounded shadow-sm p-3">
						<div class="form bg-white">
							<form class="contactForm" method="post" action=""> 
								<div class="row">
									<div class="input-group mb-3 col-md-6">
										<div class="input-group-prepend">
											<span class="input-group-text">First Name<i class="text-danger">*</i></span>
										</div>
										<input name="fname" type="text" class="form-control" value="{$fname}">
									</div>
									<div class="input-group mb-3 col-md-6">
										<div class="input-group-prepend">
											<span class="input-group-text">Last Name<i class="text-danger">*</i></span>
										</div>
										<input name="lname" type="text" class="form-control" value="{$lname}">
									</div>
								
									<div class="mb-3 col-md-12">
										<div class="form-group">
											<label for="description">Description</label>
											<textarea name="description" class="form-control" id="description" rows="3"> {$description}</textarea>
										</div>
									</div>
								</div> 
								<button type="submit" name="update_profile" class="btn btn-primary font-weight-bold border shadow-sm">Update</button>  
							</form>
						</div>
					</div>
				</div>
				<div class="col-lg-12 m-2">
					<a href="{$manage_artist_url}" class="float-right btn btn-primary border shadow-sm">Continue</a> 
				</div>
			</div>
		</div>
	</section><!-- #about -->
</main>
